# 音频调度模块差异化显示配置实现说明

## 功能概述

音频调度模块现在支持根据使用场景自动配置不同的显示模式，实现了差异化的用户体验。

## 实现的功能

### 1. 应急指挥调度大屏页面 (`/emergency-command`)
- **默认显示模式**：大屏模式 (`isLargeScreenTheme = true`)
- **主题切换按钮**：显示，允许操作员在大屏模式和常规模式之间切换
- **视觉效果**：应用深色科技风主题，适合大屏显示环境
- **组件调用**：`<AudioDispatch :force-theme="'large'" />`

### 2. 独立音频调度页面 (`/dispatch/audio`)
- **默认显示模式**：常规模式 (`isLargeScreenTheme = false`)
- **主题切换按钮**：隐藏，用户无法切换到大屏模式
- **视觉效果**：使用标准的白色背景界面样式
- **组件调用**：`<AudioDispatch />` (使用默认配置)

## 技术实现

### 1. Props接口扩展
```typescript
interface Props {
  hideThemeToggle?: boolean; // 是否隐藏主题切换按钮
  forceTheme?: 'large' | 'normal' | 'auto'; // 强制指定主题模式
}
```

### 2. 智能主题判断
```typescript
const getDefaultTheme = (): boolean => {
  // 强制指定主题优先级最高
  if (props.forceTheme === 'large') return true;
  if (props.forceTheme === 'normal') return false;
  
  // 根据路由自动判断
  if (route.path === '/emergency-command') return true;  // 大屏页面
  if (route.path === '/dispatch/audio') return false;   // 独立页面
  
  return false; // 默认常规模式
};
```

### 3. 按钮显示控制
```typescript
const shouldShowThemeToggle = computed(() => {
  if (props.hideThemeToggle) return false;
  
  // 大屏页面显示切换按钮
  if (route.path === '/emergency-command') return true;
  
  // 独立页面隐藏切换按钮
  if (route.path === '/dispatch/audio') return false;
  
  return !props.hideThemeToggle;
});
```

## 使用方式

### 1. 应急指挥调度大屏中使用
```vue
<AudioDispatch :force-theme="'large'" />
```
- 强制使用大屏模式
- 显示主题切换按钮
- 操作员可以切换模式

### 2. 独立页面中使用
```vue
<AudioDispatch />
```
- 自动使用常规模式
- 隐藏主题切换按钮
- 用户无法切换模式

### 3. 自定义配置
```vue
<!-- 强制常规模式，隐藏切换按钮 -->
<AudioDispatch :force-theme="'normal'" :hide-theme-toggle="true" />

<!-- 强制大屏模式，显示切换按钮 -->
<AudioDispatch :force-theme="'large'" :hide-theme-toggle="false" />

<!-- 自动判断模式，隐藏切换按钮 -->
<AudioDispatch :force-theme="'auto'" :hide-theme-toggle="true" />
```

## 保留的功能

### 1. 完整的大屏模式代码
- 所有大屏主题CSS样式完全保留
- JavaScript逻辑代码完全保留
- 主题切换功能完全保留

### 2. 所有音频调度功能
- 设备管理功能正常
- 通话控制功能正常
- 录音功能正常
- 监控功能正常

## 测试验证

### 1. 应急指挥调度大屏测试
1. 访问 `/emergency-command`
2. 点击"音频调度"按钮
3. 验证：默认显示大屏模式（深色主题）
4. 验证：可以看到主题切换按钮
5. 验证：点击切换按钮可以切换模式

### 2. 独立音频调度页面测试
1. 访问 `/dispatch/audio`
2. 验证：默认显示常规模式（白色主题）
3. 验证：看不到主题切换按钮
4. 验证：所有音频调度功能正常工作

## 优势

1. **场景适配**：根据使用场景自动选择最适合的显示模式
2. **用户体验**：大屏环境下提供专业的视觉效果，独立页面保持简洁
3. **灵活配置**：支持通过props进行精细化控制
4. **代码保留**：所有功能代码完整保留，便于后续维护和扩展
5. **向后兼容**：不影响现有的其他模块和功能

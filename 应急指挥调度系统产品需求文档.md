# 应急指挥调度系统产品需求文档

## 1. 项目概述

### 1.1 项目背景
应急指挥调度系统是一套基于现代Web技术构建的综合性应急通信指挥平台，旨在为应急管理部门、公安系统、消防救援等机构提供统一的音视频调度、会商协调和指挥管理能力。

### 1.2 项目目标
- 构建统一的应急指挥调度平台
- 实现多媒体通信调度功能
- 提供实时音视频会商能力
- 建立完善的录像存储和回放系统
- 支持多级权限管理和用户认证

### 1.3 技术架构
- **前端框架**: Vue 3 + TypeScript + Vite
- **UI组件库**: Element Plus
- **状态管理**: Pinia
- **路由管理**: Vue Router 4
- **数据可视化**: ECharts
- **构建工具**: Vite 4

## 2. 功能需求

### 2.1 用户认证与权限管理

#### 2.1.1 登录系统
- **功能描述**: 用户通过用户名、密码和验证码进行身份认证
- **核心特性**:
  - 用户名密码验证（当前支持：admin/123456）
  - 图形验证码防护
  - 记住密码功能
  - 登录状态持久化
  - 自动重定向到目标页面

#### 2.1.2 权限控制
- **功能描述**: 基于角色的访问控制系统
- **核心特性**:
  - 路由级权限控制
  - 页面访问权限验证
  - 用户角色管理
  - 会话状态管理

### 2.2 调度管理模块

#### 2.2.1 音频调度
- **功能描述**: 实现多种音频通信调度模式
- **核心特性**:
  - **设备管理**: 支持对讲机、电台、电话等多种设备类型
  - **通话模式**:
    - 单呼：一对一通话
    - 组呼：一对多群组通话
    - 动态组呼：临时组建的群组通话
    - 混合组呼：多个群组间的通话
    - 紧急呼叫：优先级最高的紧急通信
  - **话权控制**: 实时话权分配和管理
  - **音量控制**: 独立的音量调节和静音功能
  - **通话记录**: 完整的通话历史记录
  - **录音功能**: 通话过程自动录音存储

#### 2.2.2 视频调度
- **功能描述**: 多画面视频监控和调度系统
- **核心特性**:
  - **多视图布局**: 支持单画面、四画面、九画面显示
  - **设备树管理**: 分层级的设备组织结构
  - **实时视频流**: 支持多路视频流同时显示
  - **视频控制**: 全屏显示、画面切换、拖拽排列
  - **设备状态监控**: 实时显示设备在线状态
  - **视频录制**: 支持视频流录制存储

#### 2.2.3 视频录像
- **功能描述**: 视频录像的查询、播放和管理系统
- **核心特性**:
  - **多条件查询**: 按公司、设备类型、设备ID、时间范围查询
  - **录像列表**: 分页显示录像文件列表
  - **在线播放**: 内置视频播放器支持在线回放
  - **进度控制**: 播放进度条和时间显示
  - **下载功能**: 支持录像文件下载
  - **批量操作**: 支持批量删除和下载

#### 2.2.4 视频会商
- **功能描述**: 多方视频会议和协作系统
- **核心特性**:
  - **会议管理**: 创建、加入、结束会议
  - **成员管理**: 邀请成员、踢出成员、权限控制
  - **音视频控制**: 静音、禁言、摄像头控制
  - **会议状态**: 实时显示会议状态和成员状态
  - **文字聊天**: 会议期间的文字交流功能
  - **会议录制**: 会议过程录制和存储

### 2.3 系统管理模块

#### 2.3.1 用户管理
- **功能描述**: 系统用户的创建、编辑和管理
- **核心特性**:
  - 用户信息管理
  - 用户状态控制
  - 密码重置功能
  - 用户权限分配

#### 2.3.2 角色管理
- **功能描述**: 系统角色的定义和权限配置
- **核心特性**:
  - 角色创建和编辑
  - 权限分配和管理
  - 角色继承关系
  - 角色用户关联

#### 2.3.3 权限管理
- **功能描述**: 细粒度的权限控制和管理
- **核心特性**:
  - 功能权限定义
  - 数据权限控制
  - 权限继承机制
  - 权限审计日志

### 2.4 个人中心
- **功能描述**: 用户个人信息和偏好设置
- **核心特性**:
  - 个人信息修改
  - 密码修改
  - 偏好设置
  - 操作历史

### 2.5 系统设置
- **功能描述**: 系统级配置和参数管理
- **核心特性**:
  - 系统参数配置
  - 设备参数设置
  - 网络配置管理
  - 系统维护功能

## 3. 数据模型

### 3.1 用户相关
```typescript
interface User {
  id: string;
  username: string;
  avatar?: string;
  roles: string[];
}
```

### 3.2 设备相关
```typescript
interface DispatchDevice {
  id: string;
  name: string;
  type: 'intercom' | 'radio' | 'phone' | 'other';
  status: 'online' | 'offline' | 'busy';
  groupId?: string;
  groupName?: string;
}
```

### 3.3 通话记录
```typescript
interface CallRecord {
  id: string;
  type: 'individual' | 'group' | 'dynamic' | 'mixed' | 'emergency';
  caller: string;
  receivers: string[];
  startTime: Date;
  endTime?: Date;
  duration?: number;
  status: 'ongoing' | 'completed' | 'failed';
  hasRecording?: boolean;
}
```

## 4. 用户界面设计

### 4.1 整体布局
- **顶部导航栏**: 系统标题、面包屑导航、用户信息、通知中心
- **左侧菜单栏**: 功能模块导航，支持折叠展开
- **主内容区**: 各功能模块的具体内容展示
- **响应式设计**: 适配不同屏幕尺寸

### 4.2 主题风格
- **设计语言**: 现代化扁平设计风格
- **色彩方案**: 以蓝色为主色调的专业配色
- **交互反馈**: 丰富的动画效果和状态反馈
- **可访问性**: 符合Web可访问性标准

## 5. 性能要求

### 5.1 响应时间
- 页面加载时间 < 3秒
- 用户操作响应时间 < 1秒
- 视频流延迟 < 500ms
- 音频通话延迟 < 200ms

### 5.2 并发能力
- 支持100+并发用户
- 支持50+同时音频通话
- 支持20+同时视频会商
- 支持1000+设备接入

### 5.3 可用性
- 系统可用性 ≥ 99.5%
- 故障恢复时间 < 30分钟
- 数据备份和恢复机制
- 负载均衡和容错处理

## 6. 安全要求

### 6.1 身份认证
- 强密码策略
- 会话超时控制
- 多因素认证支持
- 防暴力破解机制

### 6.2 数据安全
- 数据传输加密
- 敏感数据脱敏
- 访问日志记录
- 数据备份加密

### 6.3 网络安全
- HTTPS协议支持
- XSS和CSRF防护
- SQL注入防护
- 网络访问控制

## 7. 部署要求

### 7.1 运行环境
- **操作系统**: Linux/Windows Server
- **Web服务器**: Nginx/Apache
- **数据库**: MySQL/PostgreSQL
- **Node.js**: 版本 ≥ 16.0

### 7.2 硬件要求
- **CPU**: 4核心以上
- **内存**: 8GB以上
- **存储**: 500GB以上
- **网络**: 千兆网络接口

### 7.3 浏览器兼容性
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

## 8. 维护和支持

### 8.1 系统监控
- 实时性能监控
- 错误日志收集
- 用户行为分析
- 系统健康检查

### 8.2 更新维护
- 定期安全更新
- 功能迭代升级
- 数据库维护
- 系统优化调整

### 8.3 技术支持
- 7×24小时技术支持
- 远程故障诊断
- 现场技术服务
- 用户培训服务

---

**文档版本**: v1.0  
**创建日期**: 2024年12月  
**最后更新**: 2024年12月  
**文档状态**: 正式版
